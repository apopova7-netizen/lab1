
//
// Created by Lenovo on 15.10.2025.
//

#include "Function project 1 student1.h"

int main(void) {
    int basenumbersystem1, basenumbersystem2;

    /* Asks for the bases of the number systems and checks if the bases is entered correctly */
    puts("Enter the bases of the initial number systems");

    if (scanf("%d", &basenumbersystem1) != 1 || ValidateBase(basenumbersystem1) == 0) {
        puts("Bad input");
        return 1;
    }

    puts("Enter the bases of the final number systems");

    if (scanf("%d", &basenumbersystem2) != 1 || ValidateBase(basenumbersystem2) == 0) {
        puts("Bad input");
        return 1;
    }

    /* Allocates memory for the number. */
    char *number = malloc(MAX_LENGTH_OF_NUMBER * sizeof(char)); //проверка выделения памяти
    if (number == NULL) {
        puts("Memory Error");
        return 1;
    }
    /* Asks for the number. */
    puts("Enter the number");
    scanf("%14s", number);

    /* Checks if the number is entered correctly. */
    if (ValidateNumber(number, basenumbersystem1, (int)strlen(number)) == 0) {
        puts("Bad input");
        free(number);
        return 1;
    }
    /*Converts the number to the decimal number system from the initial
     *number system.*/
    double numberindecimal = StringToDecimal(number, basenumbersystem1);

    /* Converts the number from the decimal number system to the final number system. */
    char * result = DecimalToString(numberindecimal, basenumbersystem2);
    printf("%s\n", result);

    free(number);
    free(result);

    return 0;
}


